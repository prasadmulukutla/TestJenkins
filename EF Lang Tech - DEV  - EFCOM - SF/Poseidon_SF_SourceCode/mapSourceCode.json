{"Description":"","Valid":false,"Id":2321196,"LastModificationDate":"2018-10-09T12:19:55.923","LastRunDate":null,"MapType":"IntegrationServicesAdvancedMap","Name":"mapSourceCode","NetChange":false,"NetChangeFieldName":"","ProcessDefinitionDbId":"b72311cd-d011-4dfe-a438-ebac2c5d5891","SourceConnectionId":"bd24590d-4de3-4dc5-b564-12719dbde5e1","SourceConnectionName":"SFIntegration","SourceConnectionAlias":"SFIntegration","StartingBlockId":"c6257c26-f4b8-497b-bc4e-8901c13b8046","SourceConnectionType":"Microsoft SQL Server","TargetConnections":[{"ConnectionAlias":"Salesforce","ConnectionId":"010be794-527c-4f44-a1e1-83ab99542b18","ConnectionName":"Salesforce","ConnectionType":"Salesforce"}],"Version":"2.2","Blocks":[{"id":"c6257c26-f4b8-497b-bc4e-8901c13b8046","blockType":"NativeQuery","category":"Source","name":"NativeQuery","description":"","label":"Native Query","originalBlockLabel":"Native Query","nextBlockId":"ee966d1e-6321-40af-aaa8-a9f7dbb1924e","parentBlockId":"","prevBlockId":"","x":216,"y":49,"entity":"NativeQuery","actionName":"Native Query","connectionId":"bd24590d-4de3-4dc5-b564-12719dbde5e1","hasBeenTested":true,"queryText":"select * from (\nselect *,ROW_NUMBER()over(partition by efsourcecodename,MarketCode order by isnull(IsStandardSourceCode,0) desc, SourceCodeStatusCode) as [RowNumber] from PoseidonIICommon..SourceCode\nwhere MarketCode = 'NOO' AND ProductCode not in ('HSY','IA')\nAND SourceCode.SourceCodeTableCode = 0\n)t\nwhere t.RowNumber=1","statusOfMetadata":"Metadata successfully retrieved for Native query."},{"id":"ee966d1e-6321-40af-aaa8-a9f7dbb1924e","blockType":"ForEach","category":"Control","name":"ForEach","description":"","label":"For Each Result","originalBlockLabel":"For Each Result","nextBlockId":"","parentBlockId":"","prevBlockId":"c6257c26-f4b8-497b-bc4e-8901c13b8046","firstChildBlockId":"3cb1f075-7ae8-4856-9709-0202975d67c1"},{"id":"3cb1f075-7ae8-4856-9709-0202975d67c1","blockType":"UpdateInsert","category":"Target","name":"Source__cUpdateInsert","description":"","label":"Update/Insert Source__c","originalBlockLabel":"Update/Insert","nextBlockId":"","parentBlockId":"ee966d1e-6321-40af-aaa8-a9f7dbb1924e","prevBlockId":"","entity":"Source__c","actionName":"Update","connectionId":"010be794-527c-4f44-a1e1-83ab99542b18","isOnNoMatchMessage":false,"isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","insertActionName":"Create","filterItems":[{"compareValue":"IF(NativeQuery.IsStandardSourceCode=true,CONCATENATE(\"ALL-\",NativeQuery.EFSourceCodeName),CONCATENATE(NativeQuery.MarketCode,\"-\",NativeQuery.EFSourceCodeName))","comparisonOperator":0,"fieldName":"SourceUniqueKey__c","logicalOperator":0,"id":"0c7940a8-12da-493d-929f-db8fdadb272e"}],"fieldMappings":[{"id":"8fb32c3a-408c-4257-8603-d7f0f5a17f96","targetDataType":"System.String","targetField":"Market__c","targetFormula":"IF(NativeQuery.IsStandardSourceCode=true,\"ALL\",NativeQuery.MarketCode)","path":"Source__c"},{"id":"53d76dfd-5952-419a-9fb7-bf5216b92767","targetDataType":"System.String","targetField":"Code__c","targetFormula":"NativeQuery.EFSourceCodeName","path":"Source__c"},{"id":"f5cb1cc0-6ff3-493b-8135-16b27b9e57ee","targetDataType":"System.Boolean","targetField":"IsGlobal__c","targetFormula":"IFNULLUSE(NativeQuery.IsStandardSourceCode,false)","path":"Source__c"},{"id":"666cf807-f270-4a77-86e5-f3baa34f5615","targetDataType":"System.Boolean","targetField":"AvailableforManualEntry__c","targetFormula":"NativeQuery.ManualEntrySourceCode","path":"Source__c"},{"id":"4e416f60-efba-400c-a5ff-6b16c34b2700","targetDataType":"System.Boolean","targetField":"AvailableforExcelImport__c","targetFormula":"true","path":"Source__c"},{"id":"8d3a06de-7e6b-41a4-abe6-1f603028af6e","targetDataType":"System.Boolean","targetField":"IsActive__c","targetFormula":"IF(NativeQuery.SourceCodeStatusCode=\"AC\",true,false)","path":"Source__c"},{"id":"65091e50-fc00-41b0-b620-35db01f59840","targetDataType":"System.String","targetField":"Name","targetFormula":"NativeQuery.SourceCodeDetailName","path":"Source__c"}]},{"id":"e2c08e57-5e33-4f77-851d-5e4c4a5b0bf5","blockType":"IfElse","category":"Control","name":"IfElse","description":"","label":"Update max TS processed","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"","prevBlockId":"","x":597,"y":100,"firstChildBlockContainer1Id":"088174d8-a6dc-498b-87f0-7018449df11a","firstChildBlockContainer2Id":"","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"RECNUM()","logicalOperator":0,"rightExpression":"1","id":"2fee486f-1ff3-44b1-b4d3-f5440a2e4c5c"}]},{"id":"088174d8-a6dc-498b-87f0-7018449df11a","blockType":"UpdateInsert","category":"Source","name":"SourceCode_ScribeTrackingUpdateInsert","description":"","label":"Update/Insert SourceCode_ScribeTracking","originalBlockLabel":"Update/Insert","nextBlockId":"","parentBlockId":"e2c08e57-5e33-4f77-851d-5e4c4a5b0bf5","prevBlockId":"","containerIndex":0,"entity":"SourceCode_ScribeTracking","actionName":"Update","connectionId":"bd24590d-4de3-4dc5-b564-12719dbde5e1","isOnNoMatchMessage":false,"isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","insertActionName":"Create","filterItems":[{"compareValue":"true","comparisonOperator":0,"fieldName":"IsScribeProcessed","logicalOperator":0,"id":"bf9951b9-37f5-4583-b49a-6fdaebf245a1"}],"fieldMappings":[{"id":"77b01455-bdf8-47bd-9a5d-153f3ada7098","targetDataType":"System.Int32","targetField":"SourceCodeId","targetFormula":"NativeQuery.sourcecode_id","path":"SourceCode_ScribeTracking"},{"id":"e778276f-5055-4ad4-a585-acc211db1e79","targetDataType":"System.Byte[]","targetField":"SourceCodeTS","targetFormula":"NativeQuery.TS","path":"SourceCode_ScribeTracking"},{"id":"30c777c1-87ef-46fc-9be8-ad51e8886ca0","targetDataType":"System.DateTime","targetField":"ScribeUTCDate","targetFormula":"GETUTCDATETIME()","path":"SourceCode_ScribeTracking"},{"id":"77438e2c-7120-4658-96cd-6d6ef06b9a1c","targetDataType":"System.Boolean","targetField":"IsScribeProcessed","targetFormula":"true","path":"SourceCode_ScribeTracking"}]}],"Revision":9,"RevisionDate":"2018-06-14T08:43:18.853","RevisionComment":null}