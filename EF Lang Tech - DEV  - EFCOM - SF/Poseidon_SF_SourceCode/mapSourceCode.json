{"Description":"","Valid":false,"Id":2322058,"LastModificationDate":"2018-10-09T12:19:55.923","LastRunDate":null,"MapType":"IntegrationServicesAdvancedMap","Name":"mapSourceCode","NetChange":false,"NetChangeFieldName":"","ProcessDefinitionDbId":"b72311cd-d011-4dfe-a438-ebac2c5d5891","SourceConnectionId":"bd24590d-4de3-4dc5-b564-12719dbde5e1","SourceConnectionName":"SFIntegration","SourceConnectionAlias":"SFIntegration","StartingBlockId":"c6257c26-f4b8-497b-bc4e-8901c13b8046","SourceConnectionType":"Microsoft SQL Server","TargetConnections":[{"ConnectionAlias":"Salesforce","ConnectionId":"010be794-527c-4f44-a1e1-83ab99542b18","ConnectionName":"Salesforce","ConnectionType":"Salesforce"}],"Version":"2.2","Blocks":[{"id":"c6257c26-f4b8-497b-bc4e-8901c13b8046","blockType":"NativeQuery","category":"Source","name":"NativeQuery","description":"","label":"Native Query","originalBlockLabel":"Native Query","nextBlockId":"ee966d1e-6321-40af-aaa8-a9f7dbb1924e","parentBlockId":"","prevBlockId":"","x":216,"y":49,"entity":"NativeQuery","actionName":"Native Query","connectionId":"bd24590d-4de3-4dc5-b564-12719dbde5e1","hasBeenTested":true,"queryText":"select * from (\nselect *,ROW_NUMBER()over(partition by efsourcecodename,MarketCode order by isnull(IsStandardSourceCode,0) desc, SourceCodeStatusCode) as [RowNumber] from PoseidonIICommon..SourceCode\nwhere MarketCode = 'NOO' AND ProductCode not in ('HSY','IA')\nAND SourceCode.SourceCodeTableCode = 0\n)t\nwhere t.RowNumber=1","statusOfMetadata":"Metadata successfully retrieved for Native query."},{"id":"ee966d1e-6321-40af-aaa8-a9f7dbb1924e","blockType":"ForEach","category":"Control","name":"ForEach","description":"","label":"For Each Result","originalBlockLabel":"For Each Result","nextBlockId":"","parentBlockId":"","prevBlockId":"c6257c26-f4b8-497b-bc4e-8901c13b8046","firstChildBlockId":"3cb1f075-7ae8-4856-9709-0202975d67c1"},{"id":"3cb1f075-7ae8-4856-9709-0202975d67c1","blockType":"UpdateInsert","category":"Target","name":"Source__cUpdateInsert","description":"","label":"Update/Insert Source__c","originalBlockLabel":"Update/Insert","nextBlockId":"","parentBlockId":"ee966d1e-6321-40af-aaa8-a9f7dbb1924e","prevBlockId":"","entity":"Source__c","actionName":"Update","connectionId":"010be794-527c-4f44-a1e1-83ab99542b18","isOnNoMatchMessage":false,"isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","insertActionName":"Create","filterItems":[{"compareValue":"IF(NativeQuery.IsStandardSourceCode=true,CONCATENATE(\"ALL-\",NativeQuery.EFSourceCodeName),CONCATENATE(NativeQuery.MarketCode,\"-\",NativeQuery.EFSourceCodeName))","comparisonOperator":0,"fieldName":"SourceUniqueKey__c","logicalOperator":0,"id":"fa0198eb-9b6f-458b-b74b-a67b9dea0eac"}],"fieldMappings":[{"id":"a72b9f6b-656f-4906-bf76-45d0775fef1b","targetDataType":"System.String","targetField":"Market__c","targetFormula":"IF(NativeQuery.IsStandardSourceCode=true,\"ALL\",NativeQuery.MarketCode)","path":"Source__c"},{"id":"7c08e9d8-b171-40a0-b894-cbbdda526321","targetDataType":"System.String","targetField":"Code__c","targetFormula":"NativeQuery.EFSourceCodeName","path":"Source__c"},{"id":"d123ca9d-650a-41cd-b2e8-0305dbe183d8","targetDataType":"System.Boolean","targetField":"IsGlobal__c","targetFormula":"IFNULLUSE(NativeQuery.IsStandardSourceCode,false)","path":"Source__c"},{"id":"582583f0-59c8-4cbc-9791-2c81d43f4e59","targetDataType":"System.Boolean","targetField":"AvailableforManualEntry__c","targetFormula":"NativeQuery.ManualEntrySourceCode","path":"Source__c"},{"id":"f0dcc24f-e637-43e8-9825-df0b6ceabc92","targetDataType":"System.Boolean","targetField":"AvailableforExcelImport__c","targetFormula":"true","path":"Source__c"},{"id":"1c902b5f-6a75-4e51-86c7-0f0c8550a0d4","targetDataType":"System.Boolean","targetField":"IsActive__c","targetFormula":"IF(NativeQuery.SourceCodeStatusCode=\"AC\",true,false)","path":"Source__c"},{"id":"a43cadec-2e54-47a5-a1d5-c65ec51afdb1","targetDataType":"System.String","targetField":"Name","targetFormula":"NativeQuery.SourceCodeDetailName","path":"Source__c"}]},{"id":"e2c08e57-5e33-4f77-851d-5e4c4a5b0bf5","blockType":"IfElse","category":"Control","name":"IfElse","description":"","label":"Update max TS processed","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"","prevBlockId":"","x":597,"y":100,"firstChildBlockContainer1Id":"088174d8-a6dc-498b-87f0-7018449df11a","firstChildBlockContainer2Id":"","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"RECNUM()","logicalOperator":0,"rightExpression":"1","id":"f17d521c-925b-4077-b794-895c111fbc5b"}]},{"id":"088174d8-a6dc-498b-87f0-7018449df11a","blockType":"UpdateInsert","category":"Source","name":"SourceCode_ScribeTrackingUpdateInsert","description":"","label":"Update/Insert SourceCode_ScribeTracking","originalBlockLabel":"Update/Insert","nextBlockId":"","parentBlockId":"e2c08e57-5e33-4f77-851d-5e4c4a5b0bf5","prevBlockId":"","containerIndex":0,"entity":"SourceCode_ScribeTracking","actionName":"Update","connectionId":"bd24590d-4de3-4dc5-b564-12719dbde5e1","isOnNoMatchMessage":false,"isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","insertActionName":"Create","filterItems":[{"compareValue":"true","comparisonOperator":0,"fieldName":"IsScribeProcessed","logicalOperator":0,"id":"82094e98-9f44-4ac2-9714-20aa3f19726b"}],"fieldMappings":[{"id":"0f8bee3e-7942-4f5f-921f-edbaa91c2d0a","targetDataType":"System.Int32","targetField":"SourceCodeId","targetFormula":"NativeQuery.sourcecode_id","path":"SourceCode_ScribeTracking"},{"id":"f2847bdc-e8fb-4ca5-8adc-a79e620088fb","targetDataType":"System.Byte[]","targetField":"SourceCodeTS","targetFormula":"NativeQuery.TS","path":"SourceCode_ScribeTracking"},{"id":"745b17df-b66a-4add-a729-e17012d1a02c","targetDataType":"System.DateTime","targetField":"ScribeUTCDate","targetFormula":"GETUTCDATETIME()","path":"SourceCode_ScribeTracking"},{"id":"7b0353f5-0833-4ae8-bcc7-24dae516df00","targetDataType":"System.Boolean","targetField":"IsScribeProcessed","targetFormula":"true","path":"SourceCode_ScribeTracking"}]}],"Revision":9,"RevisionDate":"2018-06-14T08:43:18.853","RevisionComment":null}