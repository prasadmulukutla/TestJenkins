{"Description":"","Valid":true,"Id":2320779,"LastModificationDate":"2018-09-26T05:00:00.403","LastRunDate":null,"MapType":"IntegrationServicesAdvancedMap","Name":"mapScribeErrors","NetChange":true,"NetChangeFieldName":"LastRunTime","ProcessDefinitionDbId":"388b2562-d109-4488-b23f-058dc64bc968","SourceConnectionId":"d2959379-8043-4ecd-9756-5b4bff647360","SourceConnectionName":"Scribe API","SourceConnectionAlias":"ScribeAPI","StartingBlockId":"d32d9efb-eab6-4b98-9619-076cff38e73e","SourceConnectionType":"Scribe Platform API","TargetConnections":[{"ConnectionAlias":"SFIntegration","ConnectionId":"bd24590d-4de3-4dc5-b564-12719dbde5e1","ConnectionName":"SFIntegration","ConnectionType":"Microsoft SQL Server"},{"ConnectionAlias":"ScribeLookup","ConnectionId":"01ac5d37-a5f4-4819-b357-bec035973c27","ConnectionName":"Scribe Lookup","ConnectionType":"Scribe Labs - Lookup Tables"},{"ConnectionAlias":"ScribeVariables","ConnectionId":"12d4d6bd-109d-4e10-81a4-f2403dd6e3e7","ConnectionName":"Scribe Variables","ConnectionType":"Scribe Labs - Variables"}],"Version":"2.2","Blocks":[{"id":"d32d9efb-eab6-4b98-9619-076cff38e73e","blockType":"Query","category":"Source","name":"Solution","description":"","label":"Query Solution","originalBlockLabel":"Query","nextBlockId":"ad0d0533-67ce-4412-9b44-cd609b726791","parentBlockId":"","prevBlockId":"","x":297,"y":25,"entity":"Solution","actionName":"Query","connectionId":"d2959379-8043-4ecd-9756-5b4bff647360","filterItems":[],"relationships":[]},{"id":"ad0d0533-67ce-4412-9b44-cd609b726791","blockType":"ForEach","category":"Control","name":"ForEach","description":"","label":"For Each Result","originalBlockLabel":"For Each Result","nextBlockId":"","parentBlockId":"","prevBlockId":"d32d9efb-eab6-4b98-9619-076cff38e73e","firstChildBlockId":"36b91559-fc4e-4f03-8426-74ccf48ba55c"},{"id":"36b91559-fc4e-4f03-8426-74ccf48ba55c","blockType":"IfElse","category":"Control","name":"IfElse2","description":"","label":"If First Record","originalBlockLabel":"If","nextBlockId":"3c06239e-153e-41d0-bf21-d13e1f2d9641","parentBlockId":"ad0d0533-67ce-4412-9b44-cd609b726791","prevBlockId":"","firstChildBlockContainer1Id":"1d5c4b25-82da-45e8-81e9-18b02731e611","firstChildBlockContainer2Id":"","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"RECNUM()","logicalOperator":0,"rightExpression":"1","id":"ed22ed9f-ceb7-41ea-a2b7-7fbdae6e1aed"}]},{"id":"1d5c4b25-82da-45e8-81e9-18b02731e611","blockType":"Lookup","category":"Target","name":"LookupTableValueLookup","description":"","label":"Lookup LookupTableValue","originalBlockLabel":"Lookup","nextBlockId":"ea2db0c3-8a02-48ac-b0f9-182024e6f58e","parentBlockId":"36b91559-fc4e-4f03-8426-74ccf48ba55c","prevBlockId":"","containerIndex":0,"entity":"LookupTableValue","cacheResults":true,"actionName":"Query","connectionId":"01ac5d37-a5f4-4819-b357-bec035973c27","isOnMoreThanOneMessage":false,"onMoreThanOneMessage":"Operation returned more than 1 result.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnOneOrMoreMessage":false,"onOneOrMoreMessage":"Operation returned 1 or more results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"GUID(\"fb37b26f-2622-4836-b971-25e81a2a4541\")","comparisonOperator":0,"fieldName":"tableid","logicalOperator":0,"id":"9bdf62f0-bd74-4973-b060-1c44f56e5b29"},{"compareValue":"GUID(\"415faaa4-bae6-4292-9a92-6222c932e26d\")","comparisonOperator":0,"fieldName":"id","logicalOperator":0,"id":"8586cba3-8fe2-4823-9f83-c24d13d4d352"}],"fieldsToLookup":["value2","value1","id","tableid","tablename"]},{"id":"ea2db0c3-8a02-48ac-b0f9-182024e6f58e","blockType":"Upsert","category":"Target","name":"DateVariableUpsert","description":"","label":"Upsert DateVariable","originalBlockLabel":"Upsert","nextBlockId":"03425498-31e5-46a7-8e38-36becd614bc0","parentBlockId":"36b91559-fc4e-4f03-8426-74ccf48ba55c","prevBlockId":"1d5c4b25-82da-45e8-81e9-18b02731e611","containerIndex":0,"bulkCountPerOperation":2000,"useBulk":false,"entity":"DateVariable","actionName":"Upsert","connectionId":"12d4d6bd-109d-4e10-81a4-f2403dd6e3e7","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","fieldMappings":[{"id":"04ca05f2-2c70-4b50-bdbc-00aacc86ca74","targetDataType":"System.String","targetField":"name","targetFormula":"\"LastErrorRun\"","path":"DateVariable"},{"id":"badcd1dd-1416-4e39-988d-328392ca3a7b","targetDataType":"System.DateTime","targetField":"val","targetFormula":"ScribeLookup_LookupTableValueLookup.value2","path":"DateVariable"}]},{"id":"03425498-31e5-46a7-8e38-36becd614bc0","blockType":"Upsert","category":"Target","name":"LookupTableValueUpsert","description":"","label":"Upsert LookupTableValue","originalBlockLabel":"Upsert","nextBlockId":"","parentBlockId":"36b91559-fc4e-4f03-8426-74ccf48ba55c","prevBlockId":"ea2db0c3-8a02-48ac-b0f9-182024e6f58e","containerIndex":0,"bulkCountPerOperation":2000,"useBulk":false,"entity":"LookupTableValue","actionName":"Upsert","connectionId":"01ac5d37-a5f4-4819-b357-bec035973c27","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","fieldMappings":[{"id":"966f78f9-8a07-4849-bd3c-ecd97b4d49a2","targetDataType":"System.Guid","targetField":"id","targetFormula":"GUID(\"415faaa4-bae6-4292-9a92-6222c932e26d\")","path":"LookupTableValue"},{"id":"6dbda8a3-ce14-4a31-9cb5-0a5fa3a36199","targetDataType":"System.Guid","targetField":"tableid","targetFormula":"GUID(\"fb37b26f-2622-4836-b971-25e81a2a4541\")","path":"LookupTableValue"},{"id":"8fbb4b3d-cf01-4f2e-843b-88d653c22bfb","targetDataType":"System.String","targetField":"value2","targetFormula":"GETUTCDATETIME()","path":"LookupTableValue"},{"id":"d04bc3e1-848c-4544-a173-ddea39267662","targetDataType":"System.String","targetField":"value1","targetFormula":"\"LastErrorRun\"","path":"LookupTableValue"}]},{"id":"3c06239e-153e-41d0-bf21-d13e1f2d9641","blockType":"Lookup","category":"Target","name":"DateVariableLookup","description":"","label":"Lookup DateVariable","originalBlockLabel":"Lookup","nextBlockId":"9d4661e1-0114-4305-b6d3-0ecf75c4530c","parentBlockId":"ad0d0533-67ce-4412-9b44-cd609b726791","prevBlockId":"36b91559-fc4e-4f03-8426-74ccf48ba55c","entity":"DateVariable","cacheResults":true,"actionName":"Query","connectionId":"12d4d6bd-109d-4e10-81a4-f2403dd6e3e7","isOnMoreThanOneMessage":false,"onMoreThanOneMessage":"Operation returned more than 1 result.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnOneOrMoreMessage":false,"onOneOrMoreMessage":"Operation returned 1 or more results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"\"LastErrorRun\"","comparisonOperator":0,"fieldName":"name","logicalOperator":0,"id":"f3c3f76a-a20d-4366-946a-166dd50afe3d"}],"fieldsToLookup":["val","name"]},{"id":"9d4661e1-0114-4305-b6d3-0ecf75c4530c","blockType":"Fetch","category":"Source","name":"HistoryFetch","description":"","label":"Fetch History","originalBlockLabel":"Fetch","nextBlockId":"","parentBlockId":"ad0d0533-67ce-4412-9b44-cd609b726791","prevBlockId":"3c06239e-153e-41d0-bf21-d13e1f2d9641","entity":"History","firstChildBlockId":"4bad3b0f-968b-4e2b-b711-6a021c19002a","actionName":"Query","connectionId":"d2959379-8043-4ecd-9756-5b4bff647360","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"31381e4f-57fe-4304-a49c-f200bb9bd396"},{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"SolutionId","logicalOperator":0,"id":"eefad48b-4ed2-4438-95a7-d77ab3527e15"},{"compareValue":"ScribeVariables_DateVariableLookup.val","comparisonOperator":0,"fieldName":"LaterThanDate","logicalOperator":0,"id":"ff13e48d-85ed-4ba8-87be-1ee904cb05e6"}],"relationships":[]},{"id":"4bad3b0f-968b-4e2b-b711-6a021c19002a","blockType":"IfElse","category":"Control","name":"IfElse","description":"","label":"If Execution Failed","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"9d4661e1-0114-4305-b6d3-0ecf75c4530c","prevBlockId":"","firstChildBlockContainer1Id":"209ef3b7-8438-4578-a7bd-645213ec149f","firstChildBlockContainer2Id":"","elseLabel":"else","expressionItems":[{"conditionOperator":4,"leftExpression":"FIND(ScribeAPI_HistoryFetch.Result,\"Error\")","logicalOperator":0,"rightExpression":"0","id":"849c7884-e108-4202-8c88-401cb5a556a9"}]},{"id":"209ef3b7-8438-4578-a7bd-645213ec149f","blockType":"Fetch","category":"Source","name":"ErrorFetch","description":"","label":"Fetch Error","originalBlockLabel":"Fetch","nextBlockId":"","parentBlockId":"4bad3b0f-968b-4e2b-b711-6a021c19002a","prevBlockId":"","containerIndex":0,"entity":"Error","firstChildBlockId":"1772eaa6-6ae8-4b88-bba6-ef77ef5800c2","actionName":"Query","connectionId":"d2959379-8043-4ecd-9756-5b4bff647360","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"832ca4ce-5e18-4160-951c-e3ffad4c459e"},{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"SolutionId","logicalOperator":0,"id":"8c8e73a9-530d-45c0-9c68-9985cb9c43e0"},{"compareValue":"ScribeAPI_HistoryFetch.Id","comparisonOperator":0,"fieldName":"HistoryId","logicalOperator":0,"id":"6e12080e-f2f5-4e84-bd54-345e34d520db"}],"relationships":[]},{"id":"1772eaa6-6ae8-4b88-bba6-ef77ef5800c2","blockType":"Insert","category":"Target","name":"ScribeErrorCreate","description":"","label":"Create ScribeError","originalBlockLabel":"Create","nextBlockId":"","parentBlockId":"209ef3b7-8438-4578-a7bd-645213ec149f","prevBlockId":"","bulkCountPerOperation":200,"useBulk":true,"entity":"ScribeError","actionName":"Create","connectionId":"bd24590d-4de3-4dc5-b564-12719dbde5e1","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","fieldMappings":[{"id":"3279ebc2-4cb3-4910-9f2a-e5c9ff85212a","targetDataType":"System.String","targetField":"AdditionalErrorDetails","targetFormula":"ScribeAPI_ErrorFetch.AdditionalErrorDetails","path":"ScribeError"},{"id":"ee3bcb68-20f2-4d5a-8ee2-7cb503a4cbf0","targetDataType":"System.Boolean","targetField":"CanReprocess","targetFormula":"ScribeAPI_ErrorFetch.CanReprocess","path":"ScribeError"},{"id":"f64a9f5f-4457-411f-9f64-3d6c78868f5c","targetDataType":"System.String","targetField":"ErrorDetail","targetFormula":"ScribeAPI_ErrorFetch.ErrorDetail","path":"ScribeError"},{"id":"482f9eef-6a4a-4bf3-aeee-378bf82dc014","targetDataType":"System.String","targetField":"ErrorMessage","targetFormula":"ScribeAPI_ErrorFetch.ErrorMessage","path":"ScribeError"},{"id":"63f15316-4d58-49f9-8618-3daf44a5d3b6","targetDataType":"System.String","targetField":"ErrorId","targetFormula":"ScribeAPI_ErrorFetch.Id","path":"ScribeError"},{"id":"2d699041-6919-46a8-81a8-90fa20807d1b","targetDataType":"System.String","targetField":"ExecutionDetails","targetFormula":"ScribeAPI_HistoryFetch.Details","path":"ScribeError"},{"id":"e7da7dba-45d1-402c-ab59-be9a6469fecd","targetDataType":"System.Int32","targetField":"ExecutionDuration","targetFormula":"ScribeAPI_HistoryFetch.Duration","path":"ScribeError"},{"id":"7e811920-1bb7-442c-bb89-bb86f19e5835","targetDataType":"System.DateTime","targetField":"ExecutionStart","targetFormula":"ScribeAPI_HistoryFetch.Start","path":"ScribeError"},{"id":"cb2b9eb5-facb-4b85-b789-1bf1b6fa5beb","targetDataType":"System.DateTime","targetField":"ExecutionStop","targetFormula":"ScribeAPI_HistoryFetch.Stop","path":"ScribeError"},{"id":"532d495f-8f62-4aee-9b53-30a40c230394","targetDataType":"System.String","targetField":"FailedRecordId","targetFormula":"ScribeAPI_ErrorFetch.FailedRecordId","path":"ScribeError"},{"id":"82089dba-5d13-40c4-b1a5-a824b8827e5a","targetDataType":"System.String","targetField":"HistoryId","targetFormula":"ScribeAPI_HistoryFetch.Id","path":"ScribeError"},{"id":"4f321c12-518a-4eeb-b3af-d9558c8b1b36","targetDataType":"System.Boolean","targetField":"IsActionTaken","targetFormula":"false","path":"ScribeError"},{"id":"cb0f665d-84b0-43ca-aa11-8a04dcc50d0b","targetDataType":"System.Boolean","targetField":"IsMetadataProcessed","targetFormula":"false","path":"ScribeError"},{"id":"56a8b1a3-9e2e-43ae-b3be-a14fe5e0aa87","targetDataType":"System.Boolean","targetField":"IsReprocessJob","targetFormula":"ScribeAPI_HistoryFetch.IsReprocessJob","path":"ScribeError"},{"id":"749ec214-1ad8-4bf4-933c-64f62a4799f5","targetDataType":"System.String","targetField":"MapName","targetFormula":"ScribeAPI_ErrorFetch.MapName","path":"ScribeError"},{"id":"1c27a3c7-b787-4666-ab08-8b58daab6b0a","targetDataType":"System.Boolean","targetField":"Marked","targetFormula":"ScribeAPI_ErrorFetch.Marked","path":"ScribeError"},{"id":"7f2aa45a-6659-490d-ba88-301db0aabbf0","targetDataType":"System.Int32","targetField":"RecordsFailed","targetFormula":"ScribeAPI_HistoryFetch.RecordsFailed","path":"ScribeError"},{"id":"9d4e321f-878a-4cb7-b7d2-ed3f4d33660f","targetDataType":"System.Int32","targetField":"RecordsProcessed","targetFormula":"ScribeAPI_HistoryFetch.RecordsProcessed","path":"ScribeError"},{"id":"7f8ac6ac-a5db-426b-b8cc-2fbcda96b76a","targetDataType":"System.Int32","targetField":"ReprocessRecordsRemaining","targetFormula":"ScribeAPI_HistoryFetch.ReprocessRecordsRemaining","path":"ScribeError"},{"id":"889ccf6b-c1c1-449e-b7f4-f2e9ac46e556","targetDataType":"System.String","targetField":"Result","targetFormula":"ScribeAPI_HistoryFetch.Result","path":"ScribeError"},{"id":"be094942-e596-42ae-be8e-6d29633049a1","targetDataType":"System.String","targetField":"SolutionId","targetFormula":"Solution.Id","path":"ScribeError"},{"id":"79b50c22-6502-49ee-a530-acf67858cc50","targetDataType":"System.DateTime","targetField":"SolutionLastRun","targetFormula":"Solution.LastRunTime","path":"ScribeError"},{"id":"70a1f0ba-65bb-4458-8418-0c90ab6a2255","targetDataType":"System.String","targetField":"SolutionName","targetFormula":"Solution.Name","path":"ScribeError"},{"id":"2bbb3fdf-332f-4fe6-a215-d5ab99440af3","targetDataType":"System.Boolean","targetField":"SourceDataLocal","targetFormula":"ScribeAPI_HistoryFetch.SourceDataLocal","path":"ScribeError"},{"id":"3ccc7811-3b73-455a-bb77-6dea1648a565","targetDataType":"System.String","targetField":"SourceEntity","targetFormula":"ScribeAPI_ErrorFetch.SourceEntity","path":"ScribeError"}]}],"Revision":1,"RevisionDate":"2018-04-07T01:02:37.98","RevisionComment":"Initial Revision"}